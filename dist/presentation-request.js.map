{"version":3,"sources":["webpack://presentation-request/webpack/universalModuleDefinition","webpack://presentation-request/webpack/bootstrap","webpack://presentation-request/./src/configuration.js","webpack://presentation-request/./src/dataType.js","webpack://presentation-request/./src/headers.js","webpack://presentation-request/./src/methodMap.js","webpack://presentation-request/./src/request.js","webpack://presentation-request/./src/sync.js"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Configuration","uri","url","contentType","dataType","method","cache","timeout","crossDomain","xhrFields","withCredentials","user","password","allowOrigins","allowMethods","headers","success","error","complete","beforeSend","mock","DATA_TYPE","HEADERS","METHOD_MAP","mockXHR","responseType","TEXT","responseText","async","status","header","open","ASYNC","send","onload","setRequestHeader","done","fail","always","then","options","request","configuration","console","warn","xhr","type","XMLHttpRequest","encodeURI","undefined","TYPE","JSON","ACCEPT","APPLICATION","CACHE","NO_CACHE","ALLOW_ORIGINS","ALLOW_METHODS","AUTH","window","btoa","keys","length","response","parse","failure","statusText","e","data","sync","model","Error","params","READ","toString","CREATE","UPDATE","PATCH","stringify","attrs","toJSON","myData","fetch","res","ok","json","set","trigger","catch"],"mappings":"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","file":"presentation-request.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"presentation-request\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"presentation-request\"] = factory();\n\telse\n\t\troot[\"presentation-request\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/**\n * Object of configuration properties and callbacks.  Pass this to the request call to setup configutation\n */\nconst Configuration = {\n  /**\n   * uri property\n   * @property {string} uri the uri\n   */\n  uri: \"localhost\",\n\n  /**\n   * url property\n   * @property {string} url the url\n   * @deprecated\n   */\n  url: \"localhost\",\n\n  /**\n   * contentType property\n   * @property {string} contentType the content type (default is text/plain)\n   */\n  contentType: \"text/plain\",\n  /**\n   * dataType property\n   * @property {string} dataType the data type (default is text)\n   */\n  dataType: \"text\",\n  /**\n   * async property - no longer supported\n   * @property {boolean} async set async (default true)\n   */\n  //async: true;\n  /**\n   * method property\n   * @property {string} method the ajax method (default GET)\n   */\n  method: \"GET\",\n  /**\n   * cache property\n   * @property {boolean} cache the cache toggle (default true)\n   */\n  cache: true,\n  /**\n   * timeout property\n   * @property {number} timeout the timeout property\n   */\n  timeout: 0,\n  /**\n   * crossDomain property - sets withCredentials to true\n   * @property {boolean} crossDomain the cross domain property\n   */\n  crossDomain: false,\n  /**\n   * xhrFields property\n   * @namespace xhrFields\n   */\n  xhrFields: {},\n  /**\n   * withCredentials property\n   * @property {boolean} withCredentials the setting for credentails\n   */\n  withCredentials: false,\n  /**\n   * user property\n   * @property {string} user the username for credentials\n   */\n  user: null,\n  /**\n   * password property\n   * @property {string} password the password for credentials\n   */\n  password: null,\n  /**\n   * allowOrigins property\n   * @property {string} allowOrigins the allowed origins for crossDomain\n   */\n  allowOrigins: \"\",\n  /**\n   * allowMethods property\n   * @property {string} allowMethods the allowed methods for crossDomain\n   */\n  allowMethods: null,\n  /**\n   * headers property\n   * @property {object} headers an object of headers (key, value)\n   */\n  headers: {},\n  /**\n   * success callback\n   * @property {function} success a callback for success\n   */\n  success: null,\n  /**\n   * error callback\n   * @property {function} error a callback for error\n   */\n  error: null,\n  /**\n   * complete callback\n   * @property {function} complete a callback after the ajax call\n   */\n  complete: null,\n  /**\n   * beforeSend callback\n   * @property {function} beforeSend a callback before the ajax call\n   */\n  beforeSend: null,\n  /**\n   * mock\n   * @property {boolean} mock a toggle to mock the ajax call\n   */\n  mock: false\n};\n\nexport default Configuration;\n","const DATA_TYPE = {\n  \"TEXT\": \"text\",\n  \"JSON\": \"json\"\n};\n\nexport default DATA_TYPE;\n","const HEADERS = {\n  \"TYPE\": \"Content-Type\",\n  \"TEXT\": \"text/plain\",\n  \"APPLICATION\": \"application/json\",\n  \"ACCEPT\": \"Accept\",\n  \"CACHE\": \"Cache-Control\",\n  \"NO_CACHE\": \"no-cache\",\n  \"ALLOW_ORIGINS\": \"Access-Control-Allow-Origin\",\n  \"ALLOW_METHODS\": \"Access-Control-Allow-Methods\",\n  \"AUTH\": \"Authorization\"\n};\n\nexport default HEADERS;\n","// Map from CRUD to HTTP for our default sync implementation.\nconst METHOD_MAP = {\n  \"create\": \"POST\",\n  \"update\": \"PUT\",\n  \"patch\": \"PATCH\",\n  \"delete\": \"DELETE\",\n  \"read\": \"GET\",\n  \"CREATE\": \"POST\",\n  \"UPDATE\": \"PUT\",\n  \"PATCH\": \"PATCH\",\n  \"DELETE\": \"DELETE\",\n  \"READ\": \"GET\"\n};\n\nexport default METHOD_MAP;\n","import HEADERS from \"./headers.js\";\nimport DATA_TYPE from \"./dataType.js\";\n\nconst ASYNC = true; // Sync no longer supported by most clients\n\nfunction mockXHR() {\n  this.responseType = DATA_TYPE.TEXT;\n  this.responseText = \"\";\n  this.async = true;\n  this.status = 200;\n  this.header = {};\n  this.timeout = 70;\n  this.open = (method, uri, ASYNC, user, password) => {\n    this.uri = uri;\n    this.async = ASYNC;\n    this.user = user;\n    this.method = method;\n  };\n  this.send = () => {\n    this.onload();\n  };\n  this.setRequestHeader = (header, value) => {\n    this.header.header = value;\n  };\n  this.done = () => {};\n  this.fail = () => {};\n  this.always = () => {};\n  this.then = () => {};\n  this.options = {};\n};\n\n/**\n * AJAX capability using simple jQuery-like API<br/>\n * Supports the following object properties and features:\n * <ul>\n * <li>method</li>\n * <li>uri</li>\n * <li>contentType</li>\n * <li>dataType</li>\n * <li>beforeSend function</li>\n * <li>success callback</li>\n * <li>failure callback</li>\n * <li>complete callback</li>\n * <li>user</li>\n * <li>password</li>\n * <li>withCredentials</li>\n * <li>cache</li>\n * <li>timeout</li>\n * <li>mock - special flag for mocking response</li>\n * </ul>\n * @static\n * @param {Configuration} configuration object of configuration properties and callbacks.\n * @returns success or failure callback\n * @deprecated Use fetch or sync\n * @example request({\n *         uri: uri,\n *         contentType: \"text/plain\",\n *         dataType: \"text\",\n *         success: function (data, status) { ... },\n *         error: function (data, status) { ... }\n *     });\n */\nconst request = (configuration) => {\n  console.warn(\"Request is deprecated, please use fetch.\");\n  // console.debug(\"AUGMENTED: Ajax object: \" + JSON.stringify(configuration));\n  let xhr = null;\n\n  if (configuration && configuration.uri) {\n    //console.warn(\"AUGMENTED: Ajax Here\");\n    let type = configuration.type;\n\n    if (!configuration.method && configuration.type) {\n      configuration.method = configuration.type;\n    }\n\n    let method = (configuration.method) ? configuration.method : \"GET\";\n    let cache = (configuration.cache) ? (configuration.cache) : true;\n//console.warn(\"AUGMENTED: Ajax Here 2\", (configuration.mock));\n    xhr = (configuration.mock) ? new mockXHR() : new XMLHttpRequest();\n    //console.warn(\"AUGMENTED: Ajax xhr\", xhr);\n    if (configuration.timeout) {\n      xhr.timeout = configuration.timeout;\n    }\n    //const ASYNC = true; //(configuration.async !== undefined) ? configuration.async : true;\n\n    // CORS & Async\n    if (configuration.crossDomain && configuration.xhrFields && configuration.xhrFields.withCredentials) {\n      xhr.withCredentials = configuration.xhrFields.withCredentials;\n      // Sync Not supported for all browsers in CORS mode\n      //if (!async) {\n      //  logger.warn(\"AUGMENTED: Augmented.Request: Sync Not supported for all browsers in CORS mode!\");\n      //}\n      //async = true;\n    }\n\n    if (ASYNC && configuration.dataType) {\n      xhr.responseType = (configuration.dataType) ? configuration.dataType : DATA_TYPE.TEXT;\n    }\n\n    xhr.open(method, encodeURI(configuration.uri), ASYNC,\n      (configuration.user !== undefined) ? configuration.user : \"\",\n      (configuration.password !== undefined) ? configuration.password : \"\");\n    xhr.setRequestHeader(HEADERS.TYPE, (configuration.contentType) ? configuration.contentType : HEADERS.TEXT);\n\n    if (configuration.dataType === DATA_TYPE.JSON) {\n      xhr.setRequestHeader(HEADERS.ACCEPT, HEADERS.APPLICATION);\n    }\n\n    if (!cache) {\n      xhr.setRequestHeader(HEADERS.CACHE, HEADERS.NO_CACHE);\n    }\n\n    // CORS\n    if (xhr.withCredentials) {\n      let allowOrigins = \"*\", allowMethods = \"GET\";\n      if (configuration.allowOrigins) {\n        allowOrigins = configuration.allowOrigins;\n      }\n      if (configuration.allowMethods) {\n        allowMethods = configuration.allowMethods;\n      }\n\n      xhr.setRequestHeader(HEADERS.ALLOW_ORIGINS, allowOrigins);\n      xhr.setRequestHeader(HEADERS.ALLOW_METHODS, allowMethods);\n    }\n\n    // Authorization\n    if (xhr.withCredentials && configuration.user && configuration.password) {\n      xhr.setRequestHeader(HEADERS.AUTH, \"Basic \" + window.btoa(configuration.user + \":\" + configuration.password));\n    }\n\n    // custom headers\n    if (configuration.headers) {\n      let i = 0, keys = Object.keys(configuration.headers), l = keys.length;\n\n      for (i = 0; i < l; i++) {\n        xhr.setRequestHeader(keys[i], configuration.headers[keys[i]]);\n      }\n    }\n\n    xhr.onload = () => {\n      try {\n        if (xhr.status > 199 && xhr.status < 399) {\n          if (configuration.success) {\n            if (xhr.responseType === \"\" || xhr.responseType === DATA_TYPE.TEXT) {\n              if (xhr.responseText) {\n                configuration.success(xhr.responseText, xhr.status, xhr);\n              } else {\n                console.warn(\"AUGMENTED: Ajax (\" + xhr.responseType + \" responseType) did not return anything.\");\n                configuration.success(\"\", xhr.status, xhr);\n              }\n            } else if (xhr.responseType === DATA_TYPE.JSON) {\n              if (xhr.response) {\n                //console.debug(\"AUGMENTED: Ajax (JSON responseType) native JSON.\");\n                configuration.success(xhr.response, xhr.status, xhr);\n              } else if (xhr.responseText) {\n                //console.debug(\"AUGMENTED: Ajax (JSON responseType) parsed JSON from string.\");\n                configuration.success(JSON.parse(xhr.responseText), xhr.status, xhr);\n              } else {\n                console.warn(\"AUGMENTED: Ajax (\" + xhr.responseType + \" responseType) did not return anything.\");\n                configuration.success(\"\", xhr.status, xhr);\n              }\n            } else {\n              if (xhr.responseText) {\n                configuration.success(xhr.responseText, xhr.status, xhr);\n              } else if (xhr.response) {\n                configuration.success(xhr.response, xhr.status, xhr);\n              } else {\n                console.warn(\"AUGMENTED: Ajax (\" + xhr.responseType + \" responseType) did not return anything.\");\n                configuration.success(\"\", xhr.status, xhr);\n              }\n            }\n          }\n        } else if (xhr.status > 399 && xhr.status < 600) {\n          if (configuration.failure) {\n            configuration.failure(xhr, xhr.status, xhr.statusText);\n          } else if (configuration.error) {\n            configuration.error(xhr, xhr.status, xhr.statusText);\n          }\n        }\n      } catch(e) {\n        console.error(\"AUGMENTED: Ajax (\" + e + \")\");\n        if (configuration && configuration.error) {\n          configuration.error(xhr, xhr.status, xhr.statusText);\n        }\n        return xhr;\n      }\n      if (configuration.complete) {\n        configuration.complete(xhr, xhr.status);\n      }\n      return xhr;\n    };\n\n    if (configuration.beforeSend) {\n      configuration.beforeSend(xhr);\n    }\n    xhr.send(((configuration.data) ? configuration.data : \"\"));\n  }\n\n  //console.debug(\"AUGMENTED: Ajax status (\" + xhr.status + \")\");\n\n  return xhr;\n};\n\nexport default request;\n","import METHOD_MAP from \"./methodMap.js\";\nimport DATA_TYPE from \"./dataType.js\";\nimport HEADERS from \"./headers.js\";\n\n// pull from Next as a module\nconst isFunction = (name) => {\n  return Object.prototype.toString.call(name) == \"[object Function]\";\n};\n\n/**\n * Base sync method that can pass special augmented features\n */\nconst sync = async (method, model, options = {}) => {\n  if (!model) {\n    console.error(\"No model to sync!\");\n    throw new Error(\"No model to sync!\");\n  }\n\n  let data = null;\n\n  const type = (method) ? METHOD_MAP[method] : METHOD_MAP.READ;\n  // Default JSON-request options.\n  const params = {\n    type: type,\n    dataType: DATA_TYPE.JSON,\n    success: options.success,\n    error: options.error\n  };\n\n  // Ensure that we have a uri.\n  if (!options.uri) {\n    if (model && model.uri) {\n      if (isFunction(model.uri)) {\n        options.uri = model.uri();\n      } else {\n        options.uri = model.uri;\n      }\n    } else {\n      throw new Error(`A \"uri\" property or model with \"uri\" must be specified in the collection or model class!`);\n    }\n  }\n\n  // Ensure that we have the appropriate request data.\n  if (options.data == null && model &&\n        (method === METHOD_MAP.CREATE || method === METHOD_MAP.UPDATE || method === METHOD_MAP.PATCH)) {\n    params.contentType = HEADERS.APPLICATION;\n    params.data = JSON.stringify(options.attrs || model.toJSON(options));\n  }\n\n  // TODO: figure out what this was supposed to do.\n  // Don't process data on a non-GET request.\n  // if (params.type !== METHOD_MAP.READ) {\n    //params.processData = false;\n    // params.data = null;\n  // }\n\n  const myData = (params.data) ? JSON.stringify(data) : null;\n\n  return await fetch(options.uri, {\n    \"method\": params.type,\n    \"headers\": {\"Content-Type\": params.contentType},\n    \"credentials\": 'include',\n    \"body\": myData\n  })\n  .then((res) => {\n    //console.debug(`Status: ${res.status}`);\n    if(res.ok) {\n      //console.debug(\"fetch finished\");\n      return res.json();\n    }\n    throw new Error(`${res.status}: ${params.uri} ${res.statusText} `);\n  })\n  .then((response) => {\n    // console.debug(`Response: ${JSON.stringify(response)}`);\n    model.set(response);\n    data = response;\n    return response;\n  })\n  .then((response) => {\n    if (params.success) {\n      return params.success(response);\n    }\n    return response;\n  })\n  .then((response) => {\n    // null is the old xhr\n    model.trigger(\"request\", model, null, options);\n    //console.debug(\"completing sync\");\n    return response;\n  })\n  .catch((error) => {\n    if (params.error) {\n      return params.error(error);\n    }\n    console.error(error);\n    return error;\n  });\n};\n\nexport default sync;\n"],"sourceRoot":""}