!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("presentation-request",[],t):"object"==typeof exports?exports["presentation-request"]=t():e["presentation-request"]=t()}(this,(function(){return function(e){var t={};function s(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/dist/",s(s.s=4)}([function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={TEXT:"text",JSON:"json"}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={TYPE:"Content-Type",TEXT:"text/plain",APPLICATION:"application/json",ACCEPT:"Accept",CACHE:"Cache-Control",NO_CACHE:"no-cache",ALLOW_ORIGINS:"Access-Control-Allow-Origin",ALLOW_METHODS:"Access-Control-Allow-Methods",AUTH:"Authorization"}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET",CREATE:"POST",UPDATE:"PUT",PATCH:"PATCH",DELETE:"DELETE",READ:"GET"}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(s(1)),n=o(s(0));function o(e){return e&&e.__esModule?e:{default:e}}function u(){this.responseType=n.default.TEXT,this.responseText="",this.async=!0,this.status=200,this.header={},this.timeout=70,this.open=(e,t,s,r,n)=>{this.uri=t,this.async=s,this.user=r,this.method=e},this.send=()=>{this.onload()},this.setRequestHeader=(e,t)=>{this.header.header=t},this.done=()=>{},this.fail=()=>{},this.always=()=>{},this.then=()=>{},this.options={}}t.default=e=>{let t=null;if(e&&e.uri){e.type;!e.method&&e.type&&(e.method=e.type);let s=e.method?e.method:"GET",o=!e.cache||e.cache;if(t=e.mock?new u:new XMLHttpRequest,e.timeout&&(t.timeout=e.timeout),e.crossDomain&&e.xhrFields&&e.xhrFields.withCredentials&&(t.withCredentials=e.xhrFields.withCredentials),e.dataType&&(t.responseType=e.dataType?e.dataType:n.default.TEXT),t.open(s,encodeURI(e.uri),!0,void 0!==e.user?e.user:"",void 0!==e.password?e.password:""),t.setRequestHeader(r.default.TYPE,e.contentType?e.contentType:r.default.TEXT),e.dataType===n.default.JSON&&t.setRequestHeader(r.default.ACCEPT,r.default.APPLICATION),o||t.setRequestHeader(r.default.CACHE,r.default.NO_CACHE),t.withCredentials){let s="*",n="GET";e.allowOrigins&&(s=e.allowOrigins),e.allowMethods&&(n=e.allowMethods),t.setRequestHeader(r.default.ALLOW_ORIGINS,s),t.setRequestHeader(r.default.ALLOW_METHODS,n)}if(t.withCredentials&&e.user&&e.password&&t.setRequestHeader(r.default.AUTH,"Basic "+window.btoa(e.user+":"+e.password)),e.headers){let s=0,r=Object.keys(e.headers),n=r.length;for(s=0;s<n;s++)t.setRequestHeader(r[s],e.headers[r[s]])}t.onload=()=>{try{t.status>199&&t.status<399?e.success&&(""===t.responseType||t.responseType===n.default.TEXT?t.responseText?e.success(t.responseText,t.status,t):(console.warn("AUGMENTED: Ajax ("+t.responseType+" responseType) did not return anything."),e.success("",t.status,t)):t.responseType===n.default.JSON?t.response?e.success(t.response,t.status,t):t.responseText?e.success(JSON.parse(t.responseText),t.status,t):(console.warn("AUGMENTED: Ajax ("+t.responseType+" responseType) did not return anything."),e.success("",t.status,t)):t.responseText?e.success(t.responseText,t.status,t):t.response?e.success(t.response,t.status,t):(console.warn("AUGMENTED: Ajax ("+t.responseType+" responseType) did not return anything."),e.success("",t.status,t))):t.status>399&&t.status<600&&(e.failure?e.failure(t,t.status,t.statusText):e.error&&e.error(t,t.status,t.statusText))}catch(s){return console.error("AUGMENTED: Ajax ("+s+")"),e&&e.error&&e.error(t,t.status,t.statusText),t}return e.complete&&e.complete(t,t.status),t},e.beforeSend&&e.beforeSend(t),t.send(e.data?e.data:"")}return t}},function(e,t,s){"use strict";var r=l(s(5)),n=l(s(0)),o=l(s(1)),u=l(s(2)),a=l(s(3)),i=l(s(6));function l(e){return e&&e.__esModule?e:{default:e}}e.exports.Configuration=r.default,e.exports.DATA_TYPE=n.default,e.exports.HEADERS=o.default,e.exports.METHOD_MAP=u.default,e.exports.request=a.default,e.exports.sync=i.default},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={uri:"localhost",url:"localhost",contentType:"text/plain",dataType:"text",method:"GET",cache:!0,timeout:0,crossDomain:!1,xhrFields:{},withCredentials:!1,user:null,password:null,allowOrigins:"",allowMethods:null,headers:{},success:null,error:null,complete:null,beforeSend:null,mock:!1}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(s(2)),n=(u(s(3)),u(s(0))),o=u(s(1));function u(e){return e&&e.__esModule?e:{default:e}}function a(e,t,s,r,n,o,u){try{var a=e[o](u),i=a.value}catch(e){return void s(e)}a.done?t(i):Promise.resolve(i).then(r,n)}const i=(l=function*(e,t,s){if(!t)throw console.error("No model to sync!"),new Error("No model to sync!");let u=null;s||(s={});const a={type:e?r.default[e]:r.default.READ,dataType:n.default.JSON,success:s.success,error:s.error};if(!s.uri){if(!t||!t.uri)throw new Error('A "uri" property or model with "uri" must be specified in the collection or model class!');(e=>"[object Function]"==Object.prototype.toString.call(e))(t.uri)?s.uri=t.uri():s.uri=t.uri}null!=s.data||!t||e!==r.default.CREATE&&e!==r.default.UPDATE&&e!==r.default.PATCH||(a.contentType=o.default.APPLICATION,a.data=JSON.stringify(s.attrs||t.toJSON(s))),a.type!==r.default.READ&&(a.data=null);const i=a.data?JSON.stringify(u):null;return yield fetch(s.uri,{method:a.type,headers:{"Content-Type":a.contentType},credentials:"include",body:i}).then((function(e){if(e.ok)return e.json();throw new Error(`${e.status}: ${a.uri} ${e.statusText} `)})).then((function(e){return t.set(e),u=e,e})).then((function(e){return a.success?a.success(e):e})).then((function(e){return t.trigger("request",t,null,s),e})).catch((function(e){return a.error?a.error(e):(console.error(e),e)}))},d=function(){var e=this,t=arguments;return new Promise((function(s,r){var n=l.apply(e,t);function o(e){a(n,s,r,o,u,"next",e)}function u(e){a(n,s,r,o,u,"throw",e)}o(void 0)}))},function(e,t,s){return d.apply(this,arguments)});var l,d;t.default=i}])}));
//# sourceMappingURL=presentation-request.js.map