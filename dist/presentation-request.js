!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("presentation-request",[],t):"object"==typeof exports?exports["presentation-request"]=t():e["presentation-request"]=t()}(this,(function(){return function(e){var t={};function s(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/dist/",s(s.s=0)}([function(e,t,s){"use strict";s.r(t),s.d(t,"Configuration",(function(){return r})),s.d(t,"DATA_TYPE",(function(){return n})),s.d(t,"HEADERS",(function(){return o})),s.d(t,"METHOD_MAP",(function(){return a})),s.d(t,"request",(function(){return i})),s.d(t,"sync",(function(){return c}));var r={uri:"localhost",url:"localhost",contentType:"text/plain",dataType:"text",method:"GET",cache:!0,timeout:0,crossDomain:!1,xhrFields:{},withCredentials:!1,user:null,password:null,allowOrigins:"",allowMethods:null,headers:{},success:null,error:null,complete:null,beforeSend:null,mock:!1};var n={TEXT:"text",JSON:"json"};var o={TYPE:"Content-Type",TEXT:"text/plain",APPLICATION:"application/json",ACCEPT:"Accept",CACHE:"Cache-Control",NO_CACHE:"no-cache",ALLOW_ORIGINS:"Access-Control-Allow-Origin",ALLOW_METHODS:"Access-Control-Allow-Methods",AUTH:"Authorization"};var a={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET",CREATE:"POST",UPDATE:"PUT",PATCH:"PATCH",DELETE:"DELETE",READ:"GET"};function u(){this.responseType=n.TEXT,this.responseText="",this.async=!0,this.status=200,this.header={},this.timeout=70,this.open=(e,t,s,r,n)=>{this.uri=t,this.async=s,this.user=r,this.method=e},this.send=()=>{this.onload()},this.setRequestHeader=(e,t)=>{this.header.header=t},this.done=()=>{},this.fail=()=>{},this.always=()=>{},this.then=()=>{},this.options={}}var i=e=>{console.warn("Request is deprecated, please use fetch.");let t=null;if(e&&e.uri){e.type;!e.method&&e.type&&(e.method=e.type);let s=e.method?e.method:"GET",r=!e.cache||e.cache;if(t=e.mock?new u:new XMLHttpRequest,e.timeout&&(t.timeout=e.timeout),e.crossDomain&&e.xhrFields&&e.xhrFields.withCredentials&&(t.withCredentials=e.xhrFields.withCredentials),e.dataType&&(t.responseType=e.dataType?e.dataType:n.TEXT),t.open(s,encodeURI(e.uri),!0,void 0!==e.user?e.user:"",void 0!==e.password?e.password:""),t.setRequestHeader(o.TYPE,e.contentType?e.contentType:o.TEXT),e.dataType===n.JSON&&t.setRequestHeader(o.ACCEPT,o.APPLICATION),r||t.setRequestHeader(o.CACHE,o.NO_CACHE),t.withCredentials){let s="*",r="GET";e.allowOrigins&&(s=e.allowOrigins),e.allowMethods&&(r=e.allowMethods),t.setRequestHeader(o.ALLOW_ORIGINS,s),t.setRequestHeader(o.ALLOW_METHODS,r)}if(t.withCredentials&&e.user&&e.password&&t.setRequestHeader(o.AUTH,"Basic "+window.btoa(e.user+":"+e.password)),e.headers){let s=0,r=Object.keys(e.headers),n=r.length;for(s=0;s<n;s++)t.setRequestHeader(r[s],e.headers[r[s]])}t.onload=()=>{try{t.status>199&&t.status<399?e.success&&(""===t.responseType||t.responseType===n.TEXT?t.responseText?e.success(t.responseText,t.status,t):(console.warn("AUGMENTED: Ajax ("+t.responseType+" responseType) did not return anything."),e.success("",t.status,t)):t.responseType===n.JSON?t.response?e.success(t.response,t.status,t):t.responseText?e.success(JSON.parse(t.responseText),t.status,t):(console.warn("AUGMENTED: Ajax ("+t.responseType+" responseType) did not return anything."),e.success("",t.status,t)):t.responseText?e.success(t.responseText,t.status,t):t.response?e.success(t.response,t.status,t):(console.warn("AUGMENTED: Ajax ("+t.responseType+" responseType) did not return anything."),e.success("",t.status,t))):t.status>399&&t.status<600&&(e.failure?e.failure(t,t.status,t.statusText):e.error&&e.error(t,t.status,t.statusText))}catch(s){return console.error("AUGMENTED: Ajax ("+s+")"),e&&e.error&&e.error(t,t.status,t.statusText),t}return e.complete&&e.complete(t,t.status),t},e.beforeSend&&e.beforeSend(t),t.send(e.data?e.data:"")}return t};var c=async(e=a.READ,t,s={})=>{if(!t)throw new Error("No model to sync!");s.attrs&&(Logger.warn("options.attrs is deprecated, please use options.data"),s.data=s.attrs);const r={type:e?a[String(e).toUpperCase()]:a.READ,dataType:n.JSON,contentType:o.APPLICATION,success:s.success,error:s.error,data:null};if(!s.uri){if(!t.uri)throw new Error('A "uri" property or model with "uri" must be specified in the collection or model class!');u=t.uri,"[object Function]"==Object.prototype.toString.call(u)?s.uri=t.uri():s.uri=t.uri}var u;return r.data=s.data?JSON.stringify(s.data):t.toString(s),await fetch(s.uri,{method:r.type,headers:{"Content-Type":r.contentType},credentials:"include",body:r.type!==a.READ&&r.type!==a.DELETE?r.data:null}).then(e=>{if(e.ok)return e.json();throw new Error(`${e.status}: ${r.uri} ${e.statusText}`)}).then(e=>(t.set(e),e)).then(e=>r.success?r.success(e):e).then(e=>(t.trigger("request",t,null,s),e)).catch(e=>r.error?r.error(e):(Logger.error(e),e))}}])}));
//# sourceMappingURL=presentation-request.js.map